# FFI, int and num

## How to reproduce

```
❯ cd primitives_library
❯ cmake .
-- Configuring done
-- Generating done
-- Build files have been written to: /home/harald/git/dart-ffi/ffi/primitives_library
❯ make
[ 50%] Built target primitives_test
[100%] Built target primitives_library
❯ cd ..
❯ dart pub get
[...]
❯ dart run ffigen
Running in Directory: '/home/harald/git/dart-ffi/ffi'
[WARNING]: Prefer adding Key '[description]' to your config.
Input Headers: [primitives_library/primitives.h]
Finished, Bindings generated in /home/harald/git/dart-ffi/ffi/primitives_bindings.dart
❯ dart run primitives_bench.dart
primitives_bench.dart:46:15: Error: A value of type 'num' can't be assigned to a variable of type 'int'.
    sum = sum + prlib.plusOne(i);
              ^
```

If you adjust the error line into
```
    sum = sum + prlib.plusOne(i) as int;
```

it works, but it should not be needed as in the generated primitives_bindings.dart looks like this:
```
❯ cat primitives_bindings.dart
// AUTO GENERATED FILE, DO NOT EDIT.
//
// Generated by `package:ffigen`.
import 'dart:ffi' as ffi;

class Primitive {
  /// Holds the symbol lookup function.
  final ffi.Pointer<T> Function<T extends ffi.NativeType>(String symbolName)
      _lookup;

  /// The symbols are looked up in [dynamicLibrary].
  Primitive(ffi.DynamicLibrary dynamicLibrary)
      : _lookup = dynamicLibrary.lookup;

  /// The symbols are looked up with [lookup].
  Primitive.fromLookup(
      ffi.Pointer<T> Function<T extends ffi.NativeType>(String symbolName)
          lookup)
      : _lookup = lookup;

  int plusOne(
    int a,
  ) {
    return _plusOne(
      a,
    );
  }

  late final _plusOnePtr =
      _lookup<ffi.NativeFunction<ffi.Int32 Function(ffi.Int32)>>('plusOne');
  late final _plusOne = _plusOnePtr.asFunction<int Function(int)>();
}
```
plusOne() is defined to return an int and so is \_plusOne().
